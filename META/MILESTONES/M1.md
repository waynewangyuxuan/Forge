# M1: 核心基础设施

> **目标**：建立后端核心能力

**状态**: pending
**依赖**: M0

---

## 交付物

- [ ] SQLite 数据库初始化（better-sqlite3）
- [ ] 基础 Schema 创建（projects, versions）
- [ ] YAML 配置加载器
- [ ] IPC 层基础架构（invoke/event 封装）
- [ ] 基础 Repository 接口定义
- [ ] 错误类型定义（shared/errors.ts）
- [ ] Zustand Store 基础结构（server/realtime/ui）

---

## 验收标准

- [ ] 能通过 IPC 调用后端并返回数据
- [ ] SQLite 数据库文件正确创建在 App Data 目录
- [ ] YAML 配置文件能正确加载

---

## 技术决策

| 决策点 | 选择 | 理由 |
|--------|------|------|
| SQLite 库 | better-sqlite3 | 同步 API、性能好 |
| YAML 解析 | yaml (npm) | 标准实现 |
| 状态管理 | Zustand | 轻量、TypeScript 友好 |

---

## 关键代码路径

```
src/main/infrastructure/
├── repositories/
│   └── (基础 Repository 接口)
├── config-loader/
│   └── yaml-config-loader.ts
└── ipc/
    └── index.ts (IPC 注册)

src/shared/
├── types/
│   └── ipc.types.ts
├── interfaces/
│   └── repositories.ts
└── errors.ts

src/renderer/stores/
├── server.store.ts
├── realtime.store.ts
└── ui.store.ts
```

---

## 参考文档

- [DATA-MODEL.md](../BACKEND/DATA-MODEL.md) - 数据模型
- [IPC.md](../IPC/IPC.md) - IPC 协议
- [FRONTEND.md](../FRONTEND/FRONTEND.md) - Store 设计
