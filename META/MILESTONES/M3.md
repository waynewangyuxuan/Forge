# M3: Spec 编辑

> **目标**：实现 Spec 文件的编辑功能

**状态**: ✅ complete
**依赖**: M2

---

## 交付物

### 后端

- [x] Spec Use Cases
  - [x] read-spec.ts
  - [x] save-spec.ts
- [x] spec.ipc.ts

> **注**: FileSystemAdapter 已在 M2 中实现（`main/infrastructure/adapters/file-system.adapter.ts`）

### 前端

- [x] SpecPage 页面
  - [x] 三个 Tab：PRODUCT / TECHNICAL / REGULATION
  - [x] 编辑/预览切换
- [x] MarkdownEditor 组件（CodeMirror 6）
- [x] MarkdownPreview 组件（react-markdown）
- [x] useUnsavedChanges hook（未保存提示）
- [x] Tabs 组件

---

## 验收标准

- [x] 能编辑并保存 PRODUCT.md
- [x] 能编辑并保存 TECHNICAL.md
- [x] 能编辑并保存 REGULATION.md
- [x] 切换 Tab 时有未保存提示
- [x] 文件内容正确写入项目目录 META/CORE/
- [x] 支持 Markdown 预览

---

## IPC 通道

| 通道 | 说明 |
|------|------|
| `spec:read` | 读取 Spec 文件 |
| `spec:save` | 保存 Spec 文件 |

---

## 组件设计

```
SpecPage
├── Tabs (PRODUCT | TECHNICAL | REGULATION)
├── MarkdownEditor
│   └── textarea / CodeMirror
├── MarkdownPreview
│   └── markdown-it 渲染
└── ActionBar
    ├── Save 按钮
    └── Generate 按钮 (→ M4)
```

---

## 参考文档

- [IPC.md](../IPC/IPC.md) - 2.3 Spec
- [PAGES.md](../FRONTEND/PAGES.md) - SpecPage
- [COMPONENTS.md](../FRONTEND/COMPONENTS.md) - MarkdownEditor
